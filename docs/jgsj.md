### 系统设计
##### 设计原则

>卡片系统的设计主要考虑到如下原则：

>（1）尽量保持各模块、组件之间的独立性，降低耦合度；

>（2）保持对现有系统的兼容性，方便现有系统迁移、接入；

>（3）尽量考虑架构的扩展性与业务的适用性，方便后续新应用的使用。

---

1. 安全性
2. 协议
3. 服务可靠性
4. 日志
5. 监控

---

#### 细节点：

安全性：

	防止恶意攻击，需要对请求做加密处理(暂且考虑使用md5加密，自定义加密规则。说明：client端生成sign值，请求携带sign值，server端经过算法解密sign值验证。)

请求协议：

	接口入参：卡片ID、卡片类型、来源、操作人、推送时间、sign

推送内容验证大致包含如下几点：

	* 推送次数过滤（分为智能推送、手动推送）
	* 判断栏目信息
	* 机型信息处理
	* 测试终端信息处理
	* 地区信息处理
	* 频道信息处理
	* 黑白名单处理
	* 标签信息处理

推送成功记录日志与写库：

	* 写入mysql
	* 写入专门日志文件，使用Logstash收集log、Kibana展现推送历史（用来做卡片推送问题排查）

访问日志记录：

	* 记录访问人、访问IP、访问来源、访问时间，使用kibana展现访问接口情况

服务监控：
	
	监控服务是否可用，如有异常发送短信、邮箱提醒

                